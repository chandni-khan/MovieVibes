-- Create Database
CREATE DATABASE IF NOT EXISTS movievibesdb; 
USE movievibesdb;
    -- Create Users Table
CREATE TABLE users(
    id INT AUTO_INCREMENT PRIMARY KEY,
    NAME VARCHAR(100),
    email VARCHAR(100) UNIQUE NOT NULL,
    PASSWORD VARCHAR(255) NOT NULL
);
-- Create Movies Table
CREATE TABLE movies(
    id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    release_year INT
);
-- Create Reviews Table
CREATE TABLE reviews(
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    movie_id INT,
    rating INT CHECK
        (rating BETWEEN 1 AND 5),
        review_text TEXT,
        created_at DATETIME DEFAULT NOW(), FOREIGN KEY(user_id) REFERENCES users(id) ON DELETE CASCADE,
        FOREIGN KEY(movie_id) REFERENCES movies(id) ON DELETE CASCADE);
        -- Create Likes Table
    CREATE TABLE likes(
        id INT AUTO_INCREMENT PRIMARY KEY,
        user_id INT,
        review_id INT,
        FOREIGN KEY(user_id) REFERENCES users(id) ON DELETE CASCADE,
        FOREIGN KEY(review_id) REFERENCES reviews(id) ON DELETE CASCADE
    );
    -- Insert Sample Users
    INSERT INTO users(NAME, email, PASSWORD)
VALUES(
    'Alice Johnson',
    'alice@example.com',
    'hashed_password_1'
),
(
    'Bob Smith',
    'bob@example.com',
    'hashed_password_2'
),
(
    'Charlie Brown',
    'charlie@example.com',
    'hashed_password_3'
);
-- Insert Sample Movies
INSERT INTO movies(
    title,
    description,
    release_year
)
VALUES(
    'Inception',
    'A mind-bending thriller about dreams within dreams.',
    2010
),
(
    'Interstellar',
    'A journey beyond our galaxy to find a new home for humanity.',
    2014
),
(
    'The Dark Knight',
    'Batman faces the Joker in Gotham City.',
    2008
);
-- Insert Sample Reviews
INSERT INTO reviews(
    user_id,
    movie_id,
    rating,
    review_text
)
VALUES(
    1,
    1,
    5,
    'Absolutely mind-blowing! A must-watch for sci-fi lovers.'
),
(
    2,
    2,
    4,
    'Great visuals and storyline, but a bit slow in the middle.'
),
(
    3,
    3,
    5,
    'One of the best superhero movies ever made.'
);
-- Insert Sample Likes
INSERT INTO likes(user_id, review_id)
VALUES(1, 2),
-- Alice liked review 2
(3, 2),
-- Charlie also liked review 2
(2, 3),
-- Bob liked review 3
(1, 3),
-- Alice also liked review 3
(2, 1),
-- Bob liked review 1
(3, 1); -- Charlie liked review 1
-- View Likes Table
SELECT
    *
FROM
    likes;